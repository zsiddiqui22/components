<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Google Map</title>
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
          height: 100%;
          min-height: 100vh;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
      </style>

    <script src="jquery.js"></script>
    <!-- <script async defer type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUzZdi2LgA2zI5o2bBSqJvuV-bEEkfZpU&libraries=geometry"></script> -->
    <script>
        // var json = JSON.parse('{"lat":"42.4879714","lon":"-71.8250924","ele":"195.9","time":"2015-12-08T08:42:33.188-05:00"}'); // replace with current location

        // var json1 = JSON.parse('{"lat":"43","lon":"-72","ele":"195.9","time":"2015-12-08T08:42:33.188-05:00"}'); // replace with destination, all we need to keep here is lat/lon

        // var json2 = JSON.parse('{"lat":"41","lon":"-71","ele":"195.9","time":"2015-12-07T04:42:33.188-05:00"}'); // replace with starting coordinates

        // console.log(json.lon);

        // var _center = new google.maps.LatLng(json.lat, json.lon);
        // var directionsDisplay = new google.maps.DirectionsRenderer();
        // var directionsService = new google.maps.DirectionsService();
        // var map;

        // function initialize() {
        //     directionsDisplay = new google.maps.DirectionsRenderer();
        //     var properties = {
        //         center: _center,
        //         zoom: 5,
        //         mapTypeId: google.maps.MapTypeId.ROADMAP
        //     };

        //     map = new google.maps.Map(document.getElementById("google-map"), properties);
        //     directionsDisplay.setMap(map);

        //     var marker = new google.maps.Marker({
        //         position: new google.maps.LatLng(json2.lat, json2.lon),
        //         map: map,
        //         title: 'Where the package was shipped from'
        //     });

        //     marker.setMap(map);
        //     Route();
        // }

        // function Route() {
        //     var start = _center;
        //     var end = new google.maps.LatLng(json1.lat, json1.lon);
        //     var request = {
        //         origin: start,
        //         destination: end,
        //         provideRouteAlternatives: false,
        //         travelMode: google.maps.TravelMode.DRIVING,
        //         drivingOptions: {
        //             departureTime: new Date(Date.now()),
        //             trafficModel: google.maps.TrafficModel.BEST_GUESS
        //         }
        //     };
        //     directionsService.route(request, function (response, status) {
        //         if (status == google.maps.DirectionsStatus.OK) {
        //             directionsDisplay.setDirections(response);
        //             var point = response.routes[0].legs[0];
        //             alert('Estimated driving time remaining: ' + point.duration.text + ' (' + point.distance.text + ')'); // convert to an HTML message, I didn't know where you wanted this
        //             var ms = new Date(json.time);
        //             var ms2 = new Date(json2.time);
        //             var d2 = google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(json2.lat, json2.lon), Center);
        //             var mspm = (ms.getTime() - ms2.getTime()) / d2;
        //             var tr = (mspm * point.distance.value);
        //             var msf = ms2.getTime() + tr;
        //             alert('Estimated arrival time: ' + new Date(msf));
        //         } else {
        //             alert("couldn't get directions:" + status);
        //         }
        //     });
        //     var request1 = {
        //         origin: start,
        //         destination: end,
        //         provideRouteAlternatives: false,
        //         travelMode: google.maps.TravelMode.DRIVING,
        //         drivingOptions: {
        //             departureTime: new Date(Date.now()),
        //             trafficModel: google.maps.TrafficModel.PESSIMISTIC
        //         }
        //     };
        //     directionsService.route(request1, function (response, status) {
        //         if (status == google.maps.DirectionsStatus.OK) {
        //             directionsDisplay.setDirections(response);
        //             var point = response.routes[0].legs[0];
        //             alert('Worst case driving time: ' + point.duration.text + ' (' + point.distance.text + ')'); // convert to an HTML message, I didn't know where you wanted this
        //         } else {
        //             alert("couldn't get directions:" + status);
        //         }
        //     });
        // }

        // google.maps.event.addDomListener(window, 'load', initialize);



        var map;
        //var json = JSON.parse('{"lat":-34.397, "lon":150.644, "ele":195.9, "time":"2015-12-08T08:42:33.188-05:00"}');

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
            //center: {lat: -34.397, lng: 150.644},
            center: {lat: 24.466667, lng: 54.366669},
            zoom: 11,
            //mapTypeId: 'terrain',
            styles: [
            {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
            {
              featureType: 'administrative.locality',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'geometry',
              stylers: [{color: '#263c3f'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'labels.text.fill',
              stylers: [{color: '#6b9a76'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry',
              stylers: [{color: '#38414e'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry.stroke',
              stylers: [{color: '#212a37'}]
            },
            {
              featureType: 'road',
              elementType: 'labels.text.fill',
              stylers: [{color: '#9ca5b3'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry',
              stylers: [{color: '#746855'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry.stroke',
              stylers: [{color: '#1f2835'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'labels.text.fill',
              stylers: [{color: '#f3d19c'}]
            },
            {
              featureType: 'transit',
              elementType: 'geometry',
              stylers: [{color: '#2f3948'}]
            },
            {
              featureType: 'transit.station',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'water',
              elementType: 'geometry',
              stylers: [{color: '#17263c'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.fill',
              stylers: [{color: '#515c6d'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.stroke',
              stylers: [{color: '#17263c'}]
            }
          ]
            });

            // Create an array of alphabetical characters used to label the markers.
            //var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

            // Add some markers to the map.
            // Note: The code uses the JavaScript Array.prototype.map() method to
            // create an array of markers based on a given "locations" array.
            // The map() method here has nothing to do with the Google Maps API.
            // var markers = locations.map(function(location, i) {
            //     return new google.maps.Marker({
            //         position: location,
            //         label: labels[i % labels.length]
            //     });
            // });

            // Add a marker clusterer to manage the markers.
            //var markerCluster = new MarkerClusterer(map, markers,
              //  {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
        }

        // var locations = [
        //     {lat: -31.563910, lng: 147.154312},
        //     {lat: -33.718234, lng: 150.363181},
        //     {lat: -33.727111, lng: 150.371124},
        //     {lat: -33.848588, lng: 151.209834},
        //     {lat: -33.851702, lng: 151.216968},
        //     {lat: -34.671264, lng: 150.863657},
        //     {lat: -35.304724, lng: 148.662905},
        //     {lat: -36.817685, lng: 175.699196},
        //     {lat: -36.828611, lng: 175.790222},
        //     {lat: -37.750000, lng: 145.116667},
        //     {lat: -37.759859, lng: 145.128708},
        //     {lat: -37.765015, lng: 145.133858},
        //     {lat: -37.770104, lng: 145.143299},
        //     {lat: -37.773700, lng: 145.145187},
        //     {lat: -37.774785, lng: 145.137978},
        //     {lat: -37.819616, lng: 144.968119},
        //     {lat: -38.330766, lng: 144.695692},
        //     {lat: -39.927193, lng: 175.053218},
        //     {lat: -41.330162, lng: 174.865694},
        //     {lat: -42.734358, lng: 147.439506},
        //     {lat: -42.734358, lng: 147.501315},
        //     {lat: -42.735258, lng: 147.438000},
        //     {lat: -43.999792, lng: 170.463352}
        // ]

        
        
    </script>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUzZdi2LgA2zI5o2bBSqJvuV-bEEkfZpU&libraries=geometry&callback=initMap"
    async defer></script>
</head>

<body>
    <div id="map" style="height: 400px;"></div>
    
</body>

</html>